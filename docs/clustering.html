
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Clustering &#8212; autoprot  documentation</title>
    
    <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/pydata-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    
    <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data Visualization" href="visualization.html" />
    <link rel="prev" title="Analysis" href="analysis.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="index.html">
<p class="title">autoprot</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="installation.html">
  Installation
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="preprocessing.html">
  Data Preprocessing
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="analysis.html">
  Analysis
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  Clustering
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="visualization.html">
  Data Visualization
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="workflows.html">
  Workflows
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                

<nav id="bd-toc-nav">
    
</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="clustering">
<h1>Clustering<a class="headerlink" href="#clustering" title="Permalink to this headline">¶</a></h1>
<p>The clustering submodule contains collections of functions for data clustering.
All functions are organised in classes that store the required variables as objects of the class.
As all clustering classes are based on the same base class, using the different clustering methods should be as stright forward as changing the name of the method.</p>
<span class="target" id="module-autoprot.clustering"></span><p>Autoprot Clustering Functions.</p>
<p>&#64;author: Wignand, Julian</p>
<p>&#64;documentation: Julian</p>
<dl class="py class">
<dt class="sig sig-object py" id="autoprot.clustering.Cluster">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">autoprot.clustering.</span></span><span class="sig-name descname"><span class="pre">Cluster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clabels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rlabels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zscore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linkage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autoprot/clustering.html#Cluster"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autoprot.clustering.Cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for clustering pipelines.</p>
<dl class="py method">
<dt class="sig sig-object py" id="autoprot.clustering.Cluster.returnCluster">
<span class="sig-name descname"><span class="pre">returnCluster</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/autoprot/clustering.html#Cluster.returnCluster"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autoprot.clustering.Cluster.returnCluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Return dataframe with clustered data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autoprot.clustering.Cluster.visCluster">
<span class="sig-name descname"><span class="pre">visCluster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">colCluster</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">makeTraces</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">makeHeatmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rowColors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yticklabels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autoprot/clustering.html#Cluster.visCluster"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autoprot.clustering.Cluster.visCluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Visualise the clustering.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>colCluster</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to cluster the columns. The default is False.</p></li>
<li><p><strong>makeTraces</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to generate traces of each cluster. The default is False.</p></li>
<li><p><strong>makeHeatmap</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to generate a summery heatmap.
The default is False.</p></li>
<li><p><strong>file</strong> (<em>str</em><em>, </em><em>optional</em>) – Path to the output plot file. The default is None.</p></li>
<li><p><strong>rowColors</strong> (<em>dict</em><em>, </em><em>optional</em>) – dictionary of mapping a row title to a list of colours.
The list must have the same length as the data has rows.
Generates an additional column in the heatmeap showing
the indicated columns values as colors.
Has to be same length as provided data.
The default is None.</p></li>
<li><p><strong>colors</strong> (<em>list of str</em><em>, </em><em>optional</em>) – Colors for the annotated clusters.
Has to be the same size as the number of clusters.
The default is None.</p></li>
<li><p><strong>yticklabels</strong> (<em>list of str</em><em>, </em><em>optional</em>) – Labels for the y ticks. The default is “”.</p></li>
<li><p><strong>**kwargs</strong> – passed to seaborn.clustermap.
See <a class="reference external" href="https://seaborn.pydata.org/generated/seaborn.clustermap.html">https://seaborn.pydata.org/generated/seaborn.clustermap.html</a>
May also contain ‘z-score’ that is used during making of
cluster traces.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autoprot.clustering.Cluster.writeClusterFiles">
<span class="sig-name descname"><span class="pre">writeClusterFiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rootdir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autoprot/clustering.html#Cluster.writeClusterFiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autoprot.clustering.Cluster.writeClusterFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a folder with text files for each cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rootdir</strong> (<em>str</em>) – Path to target dir.
If the folder is named clusterResults, text files will be saved
within.
Else a new folder clusterResults will be created.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="autoprot.clustering.HCA">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">autoprot.clustering.</span></span><span class="sig-name descname"><span class="pre">HCA</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clabels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rlabels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zscore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linkage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autoprot/clustering.html#HCA"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autoprot.clustering.HCA" title="Permalink to this definition">¶</a></dt>
<dd><p>Conduct hierarchical cluster analysis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>startProcessingAt</strong> (<em>int</em>) – Position in the autoHCA to start after user intervention</p></li>
<li><p><strong>stopProcessingAt</strong> (<em>int</em>) – Position in the autoHCA to stop so that the user can intervene</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>User provides dataframe and can afterwards use various metrics and methods to perfom and evaluate
clustering.</p>
<p>StandarWorkflow:
makeLinkage() -&gt; findNClusters() -&gt; makeCluster()</p>
<p class="rubric">Examples</p>
<p>First grab a dataset that will be used for clustering such as the iris dataset.
Extract the species labelling from the dataframe as it cannot be used for
clustering and will be used later to evaluate the result.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s1">&#39;iris&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">labels</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;species&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Initialise the clustering class with the data and find the optimum number of
clusters and generate the final clustering with the autoRun method.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">autoprot.clustering</span> <span class="k">as</span> <span class="nn">clst</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">clst</span><span class="o">.</span><span class="n">HCA</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">Removed 0 NaN values from the dataframe to prepare for clustering.</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">autoRun</span><span class="p">()</span>
<span class="go">Best Davies Boulding at 2 with 0.38275284210068616</span>
<span class="go">Best Silhouoette_score at 2 with 0.6867350732769781</span>
<span class="go">Best Harabasz/Calinski at 2 with 502.82156350235897</span>
<span class="go">Using Davies Boulding Score for setting # clusters: 2</span>
<span class="go">You may manually overwrite this by setting self.nclusters</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//clustering-1.py">Source code</a>, <a class="reference external" href=".//clustering-1.png">png</a>, <a class="reference external" href=".//clustering-1.hires.png">hires.png</a>, <a class="reference external" href=".//clustering-1.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="_images/clustering-1.png" class="plot-directive" src="_images/clustering-1.png" />
</figure>
<p>Finally visualise the clustering using the visCluster method and include the
previously extracted labeling column from the original dataframe.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">labels</span><span class="o">.</span><span class="n">replace</span><span class="p">([</span><span class="s1">&#39;setosa&#39;</span><span class="p">,</span> <span class="s1">&#39;virginica&#39;</span><span class="p">,</span> <span class="s1">&#39;versicolor&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;teal&quot;</span><span class="p">,</span> <span class="s2">&quot;purple&quot;</span><span class="p">,</span> <span class="s2">&quot;salmon&quot;</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rc</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;species&quot;</span> <span class="p">:</span> <span class="n">labels</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">visCluster</span><span class="p">(</span><span class="n">rowColors</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;species&#39;</span><span class="p">:</span> <span class="n">labels</span><span class="p">})</span>
</pre></div>
</div>
<blockquote>
<div><p>(<a class="reference external" href=".//clustering-2.py">Source code</a>, <a class="reference external" href=".//clustering-2.png">png</a>, <a class="reference external" href=".//clustering-2.hires.png">hires.png</a>, <a class="reference external" href=".//clustering-2.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="_images/clustering-2.png" class="plot-directive" src="_images/clustering-2.png" />
</figure>
</div></blockquote>
<p>HCA separates the setosa quite well but virginica and versicolor are harder.
When we manually pick true the number of clusters, HCA performs only slightly
better von this dataset. Note that you can change the default cmap for the
class by changing the cmap attribute.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">nclusters</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">makeCluster</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;coolwarm&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">visCluster</span><span class="p">(</span><span class="n">rowColors</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;species&#39;</span><span class="p">:</span> <span class="n">labels</span><span class="p">},</span> <span class="n">makeTraces</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">makeHeatmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<blockquote>
<div><p>(<a class="reference external" href=".//clustering-3.py">Source code</a>)</p>
<figure class="align-default" id="id1">
<img alt="_images/clustering-3_00.png" class="plot-directive" src="_images/clustering-3_00.png" />
<figcaption>
<p><span class="caption-text">(<a class="reference external" href=".//clustering-3_00.png">png</a>, <a class="reference external" href=".//clustering-3_00.hires.png">hires.png</a>, <a class="reference external" href=".//clustering-3_00.pdf">pdf</a>)</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id2">
<img alt="_images/clustering-3_01.png" class="plot-directive" src="_images/clustering-3_01.png" />
<figcaption>
<p><span class="caption-text">(<a class="reference external" href=".//clustering-3_01.png">png</a>, <a class="reference external" href=".//clustering-3_01.hires.png">hires.png</a>, <a class="reference external" href=".//clustering-3_01.pdf">pdf</a>)</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id3">
<img alt="_images/clustering-3_02.png" class="plot-directive" src="_images/clustering-3_02.png" />
<figcaption>
<p><span class="caption-text">(<a class="reference external" href=".//clustering-3_02.png">png</a>, <a class="reference external" href=".//clustering-3_02.hires.png">hires.png</a>, <a class="reference external" href=".//clustering-3_02.pdf">pdf</a>)</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py" id="autoprot.clustering.HCA.autoRun">
<span class="sig-name descname"><span class="pre">autoRun</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">startProcessingAt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopProcessingAt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autoprot/clustering.html#HCA.autoRun"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autoprot.clustering.HCA.autoRun" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically run the clustering pipeline with standard settings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>startProcessingAt</strong> (<em>int</em><em>, </em><em>optional</em>) – Step of the pipeline to start. The default is 1.</p></li>
<li><p><strong>stopProcessingAt</strong> (<em>int</em><em>, </em><em>optional</em>) – Step of the pipeline to stop. The default is 5.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The pipeline currently consists of (1) makeLinkage, (2) findNClusters
and (3) makeCluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autoprot.clustering.HCA.findNClusters">
<span class="sig-name descname"><span class="pre">findNClusters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upTo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">5)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autoprot/clustering.html#HCA.findNClusters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autoprot.clustering.HCA.findNClusters" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate number of clusters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<em>int</em><em>, </em><em>optional</em>) – The minimum number of clusters to plot. The default is 2.</p></li>
<li><p><strong>upTo</strong> (<em>int</em><em>, </em><em>optional</em>) – The maximum number of clusters to plot. The default is 20.</p></li>
<li><p><strong>figsize</strong> (<em>tuple of float</em><em> or </em><em>int</em><em>, </em><em>optional</em>) – The size of the plotted figure.
The default is (15,5).</p></li>
<li><p><strong>plot</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to plot the corresponding figures for the cluster scores</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<dl class="simple">
<dt>Davies-Bouldin score:</dt><dd><p>The score is defined as the average similarity measure of each
cluster with its most similar cluster, where similarity is the
ratio of within-cluster distances to between-cluster distances.
Thus, clusters which are farther apart and less dispersed will
result in a better score.
The minimum score is zero, with lower values indicating better
clustering.</p>
</dd>
<dt>Silhouette score:</dt><dd><p>The Silhouette Coefficient is calculated using the mean
intra-cluster distance (a) and the mean nearest-cluster
distance (b) for each sample. The Silhouette Coefficient for a
sample is (b - a) / max(a, b). To clarify, b is the distance
between a sample and the nearest cluster that the sample is not a
part of. Note that Silhouette Coefficient is only defined if
number of labels is 2 &lt;= n_labels &lt;= n_samples - 1.
The best value is 1 and the worst value is -1. Values near 0
indicate overlapping clusters. Negative values generally indicate
that a sample has been assigned to the wrong cluster, as a
different cluster is more similar.</p>
</dd>
<dt>Harabasz score:</dt><dd><p>It is also known as the Variance Ratio Criterion.
The score is defined as ratio between the within-cluster dispersion
and the between-cluster dispersion.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autoprot.clustering.HCA.makeCluster">
<span class="sig-name descname"><span class="pre">makeCluster</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/autoprot/clustering.html#HCA.makeCluster"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autoprot.clustering.HCA.makeCluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Form flat clusters from the hierarchical clustering of linkage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> (<em>int</em>) – Max number of clusters.</p></li>
<li><p><strong>colors</strong> (<em>None</em><em> or </em><em>list of RGB_tuples</em>) – Colors for the clusters.
If none, new colors are generated.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autoprot.clustering.HCA.makeLinkage">
<span class="sig-name descname"><span class="pre">makeLinkage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'single'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'euclidean'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autoprot/clustering.html#HCA.makeLinkage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autoprot.clustering.HCA.makeLinkage" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform hierarchical clustering on the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<em>str</em>) – Which method is used for the clustering.
Possible are ‘single’, ‘average’ and ‘complete’ and all values
for method of scipy.cluster.hierarchy.linkage
See: <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.hierarchy.linkage.html">https://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.hierarchy.linkage.html</a></p></li>
<li><p><strong>metric</strong> (<em>str</em>) – Which metric is used to calculate distance.
Possible values are ‘pearson’, ‘spearman’ and all metrics
implemented in scipy.spatial.distance.pdist
See: <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.pdist.html">https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.pdist.html</a></p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="autoprot.clustering.KMeans">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">autoprot.clustering.</span></span><span class="sig-name descname"><span class="pre">KMeans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clabels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rlabels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zscore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linkage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autoprot/clustering.html#KMeans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autoprot.clustering.KMeans" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform KMeans clustering on a dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>n_clusters</strong> (<em>int</em>) – The number of clusters to separate.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The functions uses scipy.cluster.vq.kmeans2
(see <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.vq.kmeans2.html#scipy.cluster.vq.kmeans2">https://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.vq.kmeans2.html#scipy.cluster.vq.kmeans2</a>)</p>
<p class="rubric">References</p>
<ol class="upperalpha simple" start="4">
<li><p>Arthur and S. Vassilvitskii, “k-means++: the advantages of careful seeding”, Proceedings of the Eighteenth Annual ACM-SIAM Symposium on Discrete Algorithms, 2007.</p></li>
</ol>
<p class="rubric">Examples</p>
<p>First grab a dataset that will be used for clustering such as the iris dataset.
Extract the species labelling from the dataframe as it cannot be used for
clustering and will be used later to evaluate the result.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s1">&#39;iris&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">labels</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;species&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Initialise the clustering class with the data and find the optimum number of
clusters and generate the final clustering with the autoRun method.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">autoprot.clustering</span> <span class="k">as</span> <span class="nn">clst</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">clst</span><span class="o">.</span><span class="n">KMeans</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">Removed 0 NaN values from the dataframe to prepare for clustering.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">autoRun</span><span class="p">()</span>
<span class="go">Best Davies Boulding at 2 with 0.40429283717304343</span>
<span class="go">Best Silhouette_score at 2 with 0.6810461692117465</span>
<span class="go">Best Harabasz/Calinski at 3 with 561.5937320156642</span>
<span class="go">Using Davies Boulding Score for setting # clusters: 2</span>
<span class="go">You may manually overwrite this by setting self.nclusters</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//clustering-4.py">Source code</a>, <a class="reference external" href=".//clustering-4.png">png</a>, <a class="reference external" href=".//clustering-4.hires.png">hires.png</a>, <a class="reference external" href=".//clustering-4.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="_images/clustering-4.png" class="plot-directive" src="_images/clustering-4.png" />
</figure>
<p>Finally visualise the clustering using the visCluster method and include the
previously extracted labeling column from the original dataframe.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">labels</span><span class="o">.</span><span class="n">replace</span><span class="p">([</span><span class="s1">&#39;setosa&#39;</span><span class="p">,</span> <span class="s1">&#39;virginica&#39;</span><span class="p">,</span> <span class="s1">&#39;versicolor&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;teal&quot;</span><span class="p">,</span> <span class="s2">&quot;purple&quot;</span><span class="p">,</span> <span class="s2">&quot;salmon&quot;</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rc</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;species&quot;</span> <span class="p">:</span> <span class="n">labels</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">visCluster</span><span class="p">(</span><span class="n">rowColors</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;species&#39;</span><span class="p">:</span> <span class="n">labels</span><span class="p">})</span>
</pre></div>
</div>
<blockquote>
<div><p>(<a class="reference external" href=".//clustering-5.py">Source code</a>, <a class="reference external" href=".//clustering-5.png">png</a>, <a class="reference external" href=".//clustering-5.hires.png">hires.png</a>, <a class="reference external" href=".//clustering-5.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="_images/clustering-5.png" class="plot-directive" src="_images/clustering-5.png" />
</figure>
</div></blockquote>
<p>As you can see can KMeans quite well separate setosa but virginica and versicolor are harder.
When we manually pick the number of clusters, it gets a bit better</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">nclusters</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">makeCluster</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">visCluster</span><span class="p">(</span><span class="n">rowColors</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;species&#39;</span><span class="p">:</span> <span class="n">labels</span><span class="p">},</span> <span class="n">makeTraces</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">makeHeatmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<blockquote>
<div><p>(<a class="reference external" href=".//clustering-6.py">Source code</a>)</p>
<figure class="align-default" id="id4">
<img alt="_images/clustering-6_00.png" class="plot-directive" src="_images/clustering-6_00.png" />
<figcaption>
<p><span class="caption-text">(<a class="reference external" href=".//clustering-6_00.png">png</a>, <a class="reference external" href=".//clustering-6_00.hires.png">hires.png</a>, <a class="reference external" href=".//clustering-6_00.pdf">pdf</a>)</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id5">
<img alt="_images/clustering-6_01.png" class="plot-directive" src="_images/clustering-6_01.png" />
<figcaption>
<p><span class="caption-text">(<a class="reference external" href=".//clustering-6_01.png">png</a>, <a class="reference external" href=".//clustering-6_01.hires.png">hires.png</a>, <a class="reference external" href=".//clustering-6_01.pdf">pdf</a>)</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id6">
<img alt="_images/clustering-6_02.png" class="plot-directive" src="_images/clustering-6_02.png" />
<figcaption>
<p><span class="caption-text">(<a class="reference external" href=".//clustering-6_02.png">png</a>, <a class="reference external" href=".//clustering-6_02.hires.png">hires.png</a>, <a class="reference external" href=".//clustering-6_02.pdf">pdf</a>)</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py" id="autoprot.clustering.KMeans.autoRun">
<span class="sig-name descname"><span class="pre">autoRun</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">startProcessingAt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopProcessingAt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autoprot/clustering.html#KMeans.autoRun"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autoprot.clustering.KMeans.autoRun" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically run the clustering pipeline with standard settings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>startProcessingAt</strong> (<em>int</em><em>, </em><em>optional</em>) – Step of the pipeline to start. The default is 1.</p></li>
<li><p><strong>stopProcessingAt</strong> (<em>int</em><em>, </em><em>optional</em>) – Step of the pipeline to stop. The default is 5.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The pipeline currently consists of (1) findNClusters
and (2) makeCluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autoprot.clustering.KMeans.findNClusters">
<span class="sig-name descname"><span class="pre">findNClusters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upTo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">5)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'scipy'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autoprot/clustering.html#KMeans.findNClusters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autoprot.clustering.KMeans.findNClusters" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate number of clusters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<em>int</em><em>, </em><em>optional</em>) – The minimum number of clusters to plot. The default is 2.</p></li>
<li><p><strong>upTo</strong> (<em>int</em><em>, </em><em>optional</em>) – The maximum number of clusters to plot. The default is 20.</p></li>
<li><p><strong>figsize</strong> (<em>tuple of float</em><em> or </em><em>int</em><em>, </em><em>optional</em>) – The size of the plotted figure.
The default is (15,5).</p></li>
<li><p><strong>plot</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to plot the corresponding figures for the cluster scores</p></li>
<li><p><strong>algo</strong> (<em>str</em><em>, </em><em>optional</em>) – Algorith to use for KMeans Clustering. Either “scipy” or “sklearn”</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<dl class="simple">
<dt>Davies-Bouldin score:</dt><dd><p>The score is defined as the average similarity measure of each
cluster with its most similar cluster, where similarity is the
ratio of within-cluster distances to between-cluster distances.
Thus, clusters which are farther apart and less dispersed will
result in a better score.
The minimum score is zero, with lower values indicating better
clustering.</p>
</dd>
<dt>Silhouette score:</dt><dd><p>The Silhouette Coefficient is calculated using the mean
intra-cluster distance (a) and the mean nearest-cluster
distance (b) for each sample. The Silhouette Coefficient for a
sample is (b - a) / max(a, b). To clarify, b is the distance
between a sample and the nearest cluster that the sample is not a
part of. Note that Silhouette Coefficient is only defined if
number of labels is 2 &lt;= n_labels &lt;= n_samples - 1.
The best value is 1 and the worst value is -1. Values near 0
indicate overlapping clusters. Negative values generally indicate
that a sample has been assigned to the wrong cluster, as a
different cluster is more similar.</p>
</dd>
<dt>Harabasz score:</dt><dd><p>It is also known as the Variance Ratio Criterion.
The score is defined as ratio between the within-cluster dispersion
and the between-cluster dispersion.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autoprot.clustering.KMeans.makeCluster">
<span class="sig-name descname"><span class="pre">makeCluster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">algo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'scipy'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autoprot/clustering.html#KMeans.makeCluster"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autoprot.clustering.KMeans.makeCluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform k-means clustering and store the resulting labels in self.clusterId.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>algo</strong> (<em>str</em><em>, </em><em>optional</em>) – Algorith to use for KMeans Clustering. Either “scipy” or “sklearn”</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="analysis.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Analysis</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="visualization.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Data Visualization</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, The autoprot contributors.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>